/**
 * @fileoverview /users API class
 */

import Api from 'api/index'

import { EMAIL_CONFIRMATION_URL } from 'utils/config'

export default class UsersApi extends Api {

    static get library() {
        return 'users'
    }

    static login(username, password) {
        return this.fetch('/login', 'POST', { username, password })
    }

    static logout() {
        return this.fetch('/logout', 'POST')
    }

    static create(form) {
        const formData = new FormData(form)
        formData.append('email_confirmation_url', EMAIL_CONFIRMATION_URL)
        return this.fetch('', 'POST', Object.fromEntries(formData))
    }

    static get(id='') {
        return this.fetch(`/${id}`)
    }

    static me() {
        return this.fetch('/me')
    }
}
