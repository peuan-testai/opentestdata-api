from .. import db
from .base import BaseModel


class ChildDatum(BaseModel):
    __tablename__ = 'child_data'

    # fields
    parent_id = db.Column(db.Integer, db.ForeignKey('data.id'), nullable=False)
    datum_id = db.Column(db.Integer, db.ForeignKey('data.id'), nullable=False)
    name = db.Column(db.String(length=100), nullable=False)

    # relationships
    parent = db.relationship('Datum', back_populates='children', foreign_keys=[parent_id])
    datum = db.relationship('Datum', back_populates='included_in', foreign_keys=[datum_id])

    def __repr__(self):
        return (
            "<ChildDatum '%s' of %s>" %
            (self.name, self.parent)
        )
