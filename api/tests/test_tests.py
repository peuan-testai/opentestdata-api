# import json

# from ..db.models import Test
# from .utils import make_test


def test_can_create_test(client, user, test_dict):
    assert len(user.tests) == 0
    resp = client.post('/tests', headers=user.auth_headers, json=test_dict)
    resp_data = dict(
        **test_dict,
        user_id=user.id
    )
    assert 'created_at' in resp
    assert 'id' in resp
    del resp['created_at']
    del resp['id']
    assert resp == resp_data
    assert len(user.tests) == 1
